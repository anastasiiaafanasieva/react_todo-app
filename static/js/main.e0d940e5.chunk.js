(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],{19:function(e,t,c){},20:function(e,t,c){},21:function(e,t,c){},24:function(e,t,c){"use strict";c.r(t);var n=c(0),o=c.n(n),r=c(13),a=c.n(r),s=c(6),i=(c(19),c(20),c(21),c(2)),u=c(3),l=c(14),d=c(8),j=c(5),f=c.n(j),b="https://mate.academy/students-api/todos",p=function(e,t){return fetch(e,t).then((function(e){return e.ok?e.json():Promise.reject(new Error("Cannot load data from server"))}))},h=function(){return p(b)},m=function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(b,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({title:t,completed:!1,userId:3881})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(f.a.mark((function e(t,c,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("".concat(b,"/").concat(n),{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(Object(l.a)({},t,c))});case 2:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("".concat(b,"/").concat(t),{method:"DELETE"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=c(1),g=o.a.createContext({todos:[],setTodos:function(){},user:[],error:""}),y=function(e){var t=e.children,c=Object(n.useState)([]),o=Object(u.a)(c,2),r=o[0],a=o[1],s=Object(n.useState)([]),i=Object(u.a)(s,2),l=i[0],d=i[1],j=Object(n.useState)(""),f=Object(u.a)(j,2),b=f[0],m=f[1];Object(n.useEffect)((function(){h().then((function(e){return a(e)})).catch((function(e){return m(e.message)}))}),[]),Object(n.useEffect)((function(){p("".concat("https://mate.academy/students-api/users","/").concat(3881)).then((function(e){return d(e)})).catch((function(e){return m(e.message)}))}),[]);var O=Object(n.useMemo)((function(){return{todos:r,setTodos:a,user:l,error:b}}),[r,l,b]);return Object(v.jsx)(g.Provider,{value:O,children:t})},N=c(9),k=c(12),C=c.n(k),w=function(e){var t=e.item,c=Object(n.useContext)(g),o=c.todos,r=c.setTodos,a=Object(n.useState)(!1),s=Object(u.a)(a,2),i=s[0],l=s[1],d=Object(n.useState)(t.title),j=Object(u.a)(d,2),f=j[0],b=j[1],p=o.find((function(e){return e.id===t.id})),h=function(){r([].concat(Object(N.a)(o),[p.title=f])),O("title",f,t.id),l(!1)},m=function(){r(o.filter((function(e){return e.id!==t.id}))),x(t.id)};return Object(v.jsxs)("li",{className:C()({completed:t.completed,editing:i}),children:[Object(v.jsxs)("div",{className:"view",children:[Object(v.jsx)("input",{type:"checkbox",className:"toggle",checked:t.completed,id:C()({"toggle-completed":t.completed,"toggle-view":!t.completed,"toggle-editing":i}),onClick:function(){return e=!t.completed,r([].concat(Object(N.a)(o),[p.completed=e])),void O("completed",e,t.id);var e}}),Object(v.jsx)("label",{onDoubleClick:function(){return l(!0)},children:t.title}),Object(v.jsx)("button",{type:"button",className:"destroy",onClick:m,"data-cy":"deleteTodo"})]}),Object(v.jsx)("input",{type:"text",className:"edit",id:i?"editTodo":null,value:f,onChange:function(e){b(e.target.value)},onBlur:function(){h(t.id)},onKeyDown:function(e){return"Escape"===(c=e).key&&(c.preventDefault(),b(t.title),l(!1)),void("Enter"===c.key&&(c.preventDefault(),""===f.trim()?m():h()));var c}})]})},E=function(e){var t=e.todos;return Object(v.jsx)("ul",{className:"todo-list",children:t.map((function(e){return Object(v.jsx)(w,{item:e},e.id)}))})},T=function(){var e=Object(n.useContext)(g),t=e.todos,c=e.setTodos,o=e.user,r=e.error,a=Object(i.g)().status,l=Object(n.useState)(""),j=Object(u.a)(l,2),b=j[0],p=j[1],y=Object(n.useState)(0),k=Object(u.a)(y,2),C=k[0],w=k[1],T=Object(n.useState)(0),S=Object(u.a)(T,2),D=S[0],J=S[1],P=t.filter((function(e){return e.userId===o.id})),A=P.filter((function(e){switch(a){case"active":return!1===e.completed;case"completed":return!0===e.completed;default:return e}})),F=function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!b){e.next=7;break}return e.next=4,m(b);case 4:return e.next=6,h().then((function(e){return c(e)}));case 6:p("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){var e=A.filter((function(e){return!1===e.completed})).length,t=A.filter((function(e){return!0===e.completed})).length;w(e),J(t)}()}),[A]),r?Object(v.jsx)("h1",{children:r}):Object(v.jsxs)("section",{className:"todoapp",children:[Object(v.jsx)("p",{className:"user-title",children:"Todo's of ".concat(o.name)}),Object(v.jsxs)("header",{className:"header",children:[Object(v.jsx)("h1",{children:"todos"}),Object(v.jsx)("form",{onSubmit:F,children:Object(v.jsx)("input",{type:"text",value:b,className:"new-todo",placeholder:"What needs to be done?","data-cy":"createTodo",onChange:function(e){p(e.target.value)}})})]}),Object(v.jsxs)("section",{className:"main",children:[Object(v.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",onClick:function(){C>0&&P.forEach((function(e){!1===e.completed&&(c([].concat(Object(N.a)(t),[e.completed=!0])),O("completed",!0,e.id))})),0===C&&P.forEach((function(e){c([].concat(Object(N.a)(t),[e.completed=!1])),O("completed",!1,e.id)}))}}),Object(v.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),Object(v.jsx)(E,{todos:A})]}),P.length>0&&Object(v.jsxs)("footer",{className:"footer",children:[Object(v.jsx)("span",{className:"todo-count","data-cy":"todosCounter",children:"".concat(C," items left")}),Object(v.jsxs)("ul",{className:"filters",children:[Object(v.jsx)("li",{children:Object(v.jsx)(s.b,{to:"/",className:a?"":"selected",children:"All"})}),Object(v.jsx)("li",{children:Object(v.jsx)(s.b,{to:"/active",className:"active"===a?"selected":"",children:"Active"})}),Object(v.jsx)("li",{children:Object(v.jsx)(s.b,{to:"/completed",className:"completed"===a?"selected":"",children:"Completed"})})]}),Object(v.jsx)("button",{type:"button",className:"clear-completed",hidden:!D,onClick:function(){c(P.filter((function(e){return!1===e.completed}))),A.forEach((function(e){!0===e.completed&&x(e.id)}))},children:"Clear completed"})]})]})},S=function(){return Object(v.jsx)(y,{children:Object(v.jsx)(i.c,{children:Object(v.jsx)(i.a,{path:"/",element:Object(v.jsx)(T,{}),children:Object(v.jsx)(i.a,{path:":status",element:Object(v.jsx)(T,{})})})})})};a.a.render(Object(v.jsx)(s.a,{children:Object(v.jsx)(S,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.e0d940e5.chunk.js.map